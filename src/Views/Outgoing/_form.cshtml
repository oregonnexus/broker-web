@model OregonNexus.Broker.Web.ViewModels.OutgoingRequests.CreateOutgoingRequestViewModel
@using static OregonNexus.Broker.Web.Constants.Claims.CustomClaimType;

<div class="bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl">
  <header class="relative isolate">
    <div class="absolute inset-0 -z-10 overflow-hidden" aria-hidden="true">
      <div class="absolute left-16 top-full -mt-16 transform-gpu opacity-50 blur-3xl xl:left-1/2 xl:-ml-80">
        <div class="aspect-[1154/678] w-[72.125rem] bg-gradient-to-br from-secondary-500 to-secondary-100" style="clip-path: polygon(100% 38.5%, 82.6% 100%, 60.2% 37.7%, 52.4% 32.1%, 47.5% 41.8%, 45.2% 65.6%, 27.5% 23.4%, 0.1% 35.3%, 17.9% 0%, 27.7% 23.4%, 76.2% 2.5%, 74.2% 56%, 100% 38.5%)"></div>
      </div>
      <div class="absolute inset-x-0 bottom-0 h-px bg-gray-900/5"></div>
    </div>

    <div class="mx-auto max-w-7xl px-4 py-10 sm:px-6 lg:px-8">
      <div class="mx-auto flex max-w-2xl items-center justify-between gap-x-8 lg:mx-0 lg:max-w-none">
        <div class="flex items-center gap-x-6">
          <img src="~/images/Final-Education-Nexus-ICON-png.png" alt="@Model.FromDistrict" class="h-16 w-16 flex-none rounded-full ring-1 ring-gray-900/10">
          <h1>
            <div class="text-sm leading-6 text-gray-500">Student Unique ID: <span class="text-gray-700">@Model.StudentUniqueId</span></div>
            <div class="mt-1 text-base font-semibold leading-6 text-gray-900">@Model.FirstName @Model.MiddleName @Model.LastSurname</div>
          </h1>
        </div>
        <div class="flex items-center gap-x-4 sm:gap-x-6">
          <a
            asp-controller="Outgoing"
            asp-action="Index"
            asp-authorize
            asp-policy="@TransferOutgoingRecords"
            class="text-sm font-semibold leading-6 text-gray-900"
          >
            Back to list
          </a>
        </div>
      </div>
    </div>
  </header>

  <div class="mx-auto max-w-7xl px-4 py-10 sm:px-6 lg:px-8">
    <div class="mx-auto grid max-w-2xl grid-cols-1 grid-rows-1 items-start gap-x-8 gap-y-8 lg:mx-0 lg:max-w-none lg:grid-cols-3">
      <div class="lg:col-start-3 lg:row-end-1">
        <h2 class="sr-only">Match Summary</h2>
        <div class="rounded-lg bg-gray-50 shadow-sm ring-1 ring-gray-900/5"">
          <dl class="flex flex-wrap">
            <div class="flex-auto px-6 py-6">
              <dt class="text-sm font-semibold leading-6 text-gray-900 flex gap-2">
                <span class="flex-1">
                  Student Matching
                </span>
              <template x-if="isMatchingStudent">
                <span class="rounded-md bg-positive-50 px-2 py-1 text-xs font-medium text-positive-600 ring-1 ring-inset ring-positive-600/20">Match</span>
              </template>
              </dt>
              <dd class="mt-1 text-base text-gray-900">
                <select x-model="studentSsidNumber" class="block w-full rounded-md border-0 py-1.5 px-2.5 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-tertiary-700 sm:text-sm sm:leading-6">
                  <option value="">Select a Student</option>
                    <template x-for="student in students">
                      <option :value="student.ssidNumber" x-text="student.fullName"></option>
                    </template>
                </select>
              </dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                SSID Number:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.ssidNumber"></dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                First Name:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.firstName"></dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                Middle Name:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.middleName"></dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                Last Name:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.lastName"></dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                Suffix:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.suffix"></dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                Gender:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.gender"></dd>
            </div>
            <div class="flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-6 text-sm ">
              <dt class="flex-none">
                Birth Date:
              </dt>
              <dd class="font-semibold text-gray-900" x-text="selectedStudent?.birthDate"></dd>
            </div>
          </dl>
          <div class="border-t border-gray-900/5 px-6 py-6 flex gap-x-2 items-end">
            <div class="flex-1">
              @Html.LabelFor(it => it.RequestStatus, new { @class = "block text-sm font-medium leading-6 text-gray-900" })
              <select asp-for="RequestStatus" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-tertiary-700 sm:text-sm sm:leading-6">
                <option value="">Select a Status</option>
                <option value="Approved">Approved</option>
                <option value="Denied">Denied</option>
              </select>
            </div>
            <div>
              <input asp-for="RequestId" type="hidden" />
              <input asp-for="EducationOrganizations" type="hidden" />
              <input asp-for="EducationOrganizationId" type="hidden" />
              <input asp-for="Date" type="hidden" />
              <input asp-for="EdfiId" type="hidden" />
              <input asp-for="EdfiStudentUniqueId" type="hidden" />
              <input asp-for="Id" type="hidden" />
              <input asp-for="StudentUniqueId" type="hidden" />
              <input asp-for="FirstName" type="hidden" />
              <input asp-for="MiddleName" type="hidden" />
              <input asp-for="LastSurname" type="hidden" />
              <input asp-for="FromDistrict" type="hidden" />
              <input asp-for="FromSchool" type="hidden" />
              <input asp-for="FromEmail" type="hidden" />
              <input asp-for="ToDistrict" type="hidden" />
              <input asp-for="ToSchool" type="hidden" />
              <input asp-for="ToEmail" type="hidden" />
              <input asp-for="Note" type="hidden" />
              <input asp-for="Contents" type="hidden" />
              <input asp-for="Files" type="hidden" />
              <button
                type="submit"
                class="rounded-md bg-tertiary-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-tertiary-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-tertiary-700"
              >
                Send
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="-mx-4 px-4 py-8 shadow-sm ring-1 ring-gray-900/5 sm:mx-0 sm:rounded-lg sm:px-8 sm:pb-14 lg:col-span-2 lg:row-span-2 lg:row-end-2 xl:px-16 xl:pb-20 xl:pt-16">
        <h2 class="text-base font-semibold leading-6 text-gray-900">Request</h2>
        <dl class="mt-6 grid grid-cols-1 text-sm leading-6 sm:grid-cols-2">
          <div class="sm:pr-4 sm:col-span-2">
            <dt class="inline text-gray-500">Requested on</dt>
            <dd class="inline text-gray-700"><time datetime="@Model.Date">@Model.Date</time></dd>
          </div>
          <div class="mt-6 border-t border-gray-900/5 pt-6 sm:pr-4">
            <dt class="font-semibold text-gray-900">Receiving School</dt>
            <dd class="mt-2 text-gray-500"><span class="font-medium text-gray-900">@Model.ToDistrict / @Model.ToSchool</span></dd>
          </div>
          <div class="mt-6 border-t border-gray-900/5 pt-6 sm:pr-4">
            <dt class="font-semibold text-gray-900">Clerk's Email</dt>
            <dd class="mt-2 text-gray-500"><span class="font-medium text-gray-900">@Model.ToEmail</span></dd>
          </div>
          <div class="mt-6 border-t border-gray-900/5 pt-6 sm:pr-4 sm:col-span-2">
            <dt class="font-semibold text-gray-900">Notes</dt>
            <dd class="mt-2 text-gray-500"><span class="font-medium text-gray-900">@Model.Note</span></dd>
          </div>
        </dl>
        <table class="mt-16 w-full whitespace-nowrap text-left text-sm leading-6">
          <colgroup>
            <col class="w-full">
            <col>
            <col>
            <col>
          </colgroup>
          <thead class="border-b border-gray-200 text-gray-900">
            <tr>
              <th scope="col" class="px-0 py-3 font-semibold">Files</th>
            </tr>
          </thead>
          <tbody>
            @for (var i = 0; i < 5; i++)
            {
              <tr class="border-b border-gray-100">
                <td class="max-w-0 px-0 py-5 align-top">
                  <a href="#" class="text-sm leading-6 text-tertiary-600">Test.pdf</a>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      <div class="lg:col-start-3">
        <h2 class="text-sm font-semibold leading-6 text-gray-900">Messages</h2>
        <ul role="list" class="mt-6 space-y-6">
          <li class="relative flex gap-x-4">
            <div class="absolute left-0 top-0 flex w-6 justify-center -bottom-6">
              <div class="w-px bg-gray-200"></div>
            </div>
            <div class="relative flex h-6 w-6 flex-none items-center justify-center bg-white">
              <div class="h-1.5 w-1.5 rounded-full bg-gray-100 ring-1 ring-gray-300"></div>
            </div>
            <p class="flex-auto py-0.5 text-xs leading-5 text-gray-500"><span class="font-medium text-gray-900">Luis Ruiz</span> created the request.</p>
            <time datetime="2023-01-23T10:32" class="flex-none py-0.5 text-xs leading-5 text-gray-500">2d ago</time>
          </li>
          <li class="relative flex gap-x-4">
            <div class="absolute left-0 top-0 flex w-6 justify-center -bottom-6">
              <div class="w-px bg-gray-200"></div>
            </div>
            <div class="relative flex h-6 w-6 flex-none items-center justify-center bg-white">
              <div class="h-1.5 w-1.5 rounded-full bg-gray-100 ring-1 ring-gray-300"></div>
            </div>
            <div class="flex-auto rounded-md p-3 ring-1 ring-inset ring-gray-200">
              <div class="flex justify-between gap-x-4">
                <div class="py-0.5 text-xs leading-5 text-gray-500"><span class="font-medium text-gray-900">Luis Ruiz</span> commented</div>
                <time datetime="2023-01-23T15:56" class="flex-none py-0.5 text-xs leading-5 text-gray-500">1d ago</time>
              </div>
              <p class="text-sm leading-6 text-gray-500">Called student, they reassured me the forms would be ready by the 30th.</p>
            </div>
          </li>
        </ul>

        <div class="mt-6 flex gap-x-3">
          <div class="absolute left-0 top-0 flex w-6 justify-center -bottom-6">
            <div class="w-px bg-gray-200"></div>
          </div>
          <div class="relative flex h-6 w-6 flex-none items-center justify-center bg-white">
            <div class="h-1.5 w-1.5 rounded-full bg-gray-100 ring-1 ring-gray-300"></div>
          </div>
          <div class="relative grid gap-2 flex-1">
            <div class="overflow-hidden rounded-lg pb-12 shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-tertiary-600">
              <label for="message" class="sr-only">Add your message</label>
              <textarea id="message" class="block w-full resize-none border-0 bg-transparent py-1.5 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" placeholder="Add your message..."></textarea>
            </div>
            <div class="text-right">
              <button type="button" class="rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Message</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
